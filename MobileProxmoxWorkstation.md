# Mobile Proxmox Workstation

# Setup 

TL;DR

- Basic
1. xfce4, chromium, font ( 3. )
2. backlight
3. set chromium
4. post pve install script ( 1 ## ==> )
5. wifi ( 1. )
6. basic system done!

- podman & dockge

1. alpine vm ( [padman & dockge](https://github.com/gogonkt/notes/blob/main/MobileProxmoxWorkstation.md#podman-or-docker) )
2. vm need install dnsmasq on host
3. podman ( [padman & dockge](https://github.com/gogonkt/notes/blob/main/MobileProxmoxWorkstation.md#podman-or-docker) )
4. wine container ( [wine](https://github.com/gogonkt/notes/blob/main/MobileProxmoxWorkstation.md#docker-container-x-forwarding) )
5. mount directory ( [mount](https://github.com/gogonkt/notes/blob/main/MobileProxmoxWorkstation.md#proxmox) )
6. NFS ( [NFS](https://github.com/gogonkt/notes/blob/main/MobileProxmoxWorkstation.md#podman-or-docker) )

- [tproxy](https://github.com/gogonkt/notes/blob/main/MobileProxmoxWorkstation.md#tproxy)



## ==> [Proxmox VE Post Install](https://community-scripts.github.io/ProxmoxVE/scripts?id=post-pve-install) can do all post install

1. ## Configuring Proxmox after installation
- [Configuring Proxmox after installation](https://introserv.com/tutorials/configuring-proxmox-after-installation/)
- Update the system to the latest version
- Edit the apt configuration file:
  ```
  vi /etc/apt/sources.list.d/pve-enterprise.list
  ```
- Write a "#" symbol in front of it to disable the option of receiving updates from a paid repository
- Connect the no-subscription repository
  ```
  vi /etc/apt/sources.list
  ```
  ```
  deb http://download.proxmox.com/debian/pve bookworm pve-no-subscription
  ```
- Run the command to update package lists and upgrade the system:
  ```
  apt update && apt upgrade -y
  ```
- Restart

## Ref.
- [Here's what I do after installing Proxmox on a home server](https://www.xda-developers.com/changes-i-always-make-to-proxmox-in-my-home-lab/)
- [First Steps After Installing Proxmox 8: A Comprehensive Guide](https://theramblingtech.com/setup-proxmox8/)
- [First Things on new install](https://www.reddit.com/r/Proxmox/comments/1f01tfg/first_things_on_new_install/)
- [Where can I find more Templates?](https://www.reddit.com/r/Proxmox/comments/16pfiw8/where_can_i_find_more_templates/)
- **Proxmox Helper Scripts**
- https://helper-scripts.com/
- [Proxmox VE Post Install](https://community-scripts.github.io/ProxmoxVE/scripts?id=post-pve-install)
- Youtube [Proxmox Automation with Proxmox Helper Scripts!](https://www.youtube.com/watch?v=kcpu4z5eSEU)
- [Proxmox Helper Scripts: A Technical Guide](https://www.horizoniq.com/blog/proxmox-helper-scripts/)

2. ## wifi setup
- [Setting Up Proxmox on a Laptop Without an Ethernet Port](https://dev.to/varungujarathi9/setting-up-proxmox-on-a-laptop-without-an-ethernet-port-28n8) ***Worked***
- [Guide: How to configure Proxmox with WiFi](https://blog.vivekkaushik.com/guide-how-to-configure-proxmox-with-wifi)
- [Proxmox with WiFi ](https://www.reddit.com/r/Proxmox/comments/zqejl4/proxmox_with_wifi/)
- ==> [ProxMox with WiFi](https://www.x88.in/proxmox-with-wifi)
- [\[TUTORIAL\] HOWTO - Proxmox VE 8-1.2 Wifi w/ SNAT](https://forum.proxmox.com/threads/howto-proxmox-ve-8-1-2-wifi-w-snat.142831/)
- [\[TUTORIAL\] Setup Proxmox Network with WiFi Interface and VPN](https://forum.proxmox.com/threads/setup-proxmox-network-with-wifi-interface-and-vpn.143145/)
- [Setting up Proxmox over wifi](https://github.com/ThomasRives/Proxmox-over-wifi)
- Install Necessary Packages

First, update the package list and install essential networking tools:
```
apt update
apt install wpasupplicant wireless-tools
```
- Configure the Network Interface
Edit the /etc/network/interfaces file to add WiFi configuration:
```
vi /etc/network/interfaces
```
Add the following lines:
```
auto lo
iface lo inet loopback

# change wlp1s0 to your wifi interface name
auto wlp3s0
iface wlp3s0 inet static
        address 192.168.1.59/24
        gateway 192.168.1.1
        wpa-ssid [your wifi ssid]
        wpa-psk [your wifi password]

# comment all the autogenerated proxmox bridge network interface
#auto vmbr0
iface vmbr0 inet static
        address 192.168.1.59/24
        gateway 192.168.1.1
        bridge-ports enp0s25
        bridge-stp off
        bridge-fd 0

# add new bridge network interface
auto vmbr1
iface vmbr1 inet static
        address 10.0.1.1/24
        bridge-ports none
        bridge-stp off
        bridge-fd 0
        post-up echo 1 > /proc/sys/net/ipv4/ip_forward
        post-up iptables -t nat -A POSTROUTING -s '10.0.1.1/24' -o wlp3s0 -j MASQUERADE
        post-down iptables -t nat -D POSTROUTING -s '10.0.1.1/24' -o wlp3s0 -j MASQUERADE
```
- Restart Networking Service

Apply the changes by restarting the networking service:
```
systemctl restart networking
```

3. ## Install xfce & chromium & lightdm & fonts
- [Mobile Proxmox Workstation working incredibly well](https://www.reddit.com/r/Proxmox/comments/okelu9/mobile_proxmox_workstation_working_incredibly_well/)
```
apt update
# apt-get install xfce4 chromium lightdm fonts-noto-cjk
apt install xfce4 chromium lightdm fonts-noto-cjk -y
```

## Ref.
- [Mobile Proxmox Workstation working incredibly well](https://www.reddit.com/r/Proxmox/comments/okelu9/mobile_proxmox_workstation_working_incredibly_well/)
- [proxmox.com/wiki/WLAN](https://pve.proxmox.com/wiki/WLAN)
- [Mobile Lab – Proxmox Workstation](https://soogs.xyz/2025/06/14/mobile-lab-proxmox-workstation/)
- [HomeLab on a Slab - Mobile all-in-one ProxMox Homelab](https://www.youtube.com/watch?v=RD7hV0A2NOc&ab_channel=H2DC-HowtodoComputers)
- ==> https://pastebin.com/Qx8gFte3
- [Proxmox on laptop?](https://www.reddit.com/r/Proxmox/comments/1azloiw/proxmox_on_laptop/)
- [Proxmox over WIFI (WLAN)](https://pve.proxmox.com/wiki/Network_Configuration#sysadmin_network_masquerading)


# Backlight
- backlight
```
echo 8 > /sys/class/backlight/acpi_video0/brightness
```

# LXC
- [How to Create Containers in Proxmox](https://www.tecmint.com/proxmox-create-container/)

# Podman or Docker
- [Install an Alpine Desktop VM](https://homelab.casaursus.net/install-a-alpine-desktop-vm/) podman vm **Worked**
- ==> vm need install dnsmasq on host ( [Guide: How to configure Proxmox with WiFi](https://blog.vivekkaushik.com/guide-how-to-configure-proxmox-with-wifi) [backup](https://github.com/gogonkt/notes/blob/main/Proxmox-WiFi.md)  **Worked**
- [Here's how I run Docker in an LXC on Proxmox, and why it's a solid alternative to a VM](https://www.xda-developers.com/heres-how-i-run-docker-in-an-lxc-on-proxmox/)
- Unfortunately, setting up network shares inside unprivileged LXCs can be a bit of an issue. If you’re planning to connect CIFS/NFS volumes to your Docker LXC, you might want to opt for a privileged container. But since these LXCs map the container UID 0 to the Proxmox host’s UID 0, you’ll have to deal with heightened security risks.
- [I switched to Podman from Docker, and I should have done it sooner](https://www.xda-developers.com/i-switched-to-podman-instead-of-docker/)
- [A beginner's guide to containerization with Podman](https://www.xda-developers.com/a-beginners-guide-to-containerization-with-podman/)
- [Lightest way to set up file shares running completely on ProxMox](https://forum.proxmox.com/threads/lightest-way-to-set-up-file-shares-running-completely-on-proxmox.164954/) NFS
- Create a new LXC ( "Create CT" button ) and go with the "debian 12 Turnkey fileserver" - it has a stripped-down webmin interface that makes configuring easy. For samba-only access you can stick with Unprivileged, but leave Nesting on.
- https://www.turnkeylinux.org/fileserver
- 


- quadlet
- [How to run Podman and Dockge in an Alpine LXC on Proxmox](https://grencez.dev/2023/podman-dockge-20231126/) > [backup](https://github.com/gogonkt/notes/blob/main/podman_proxmox.md) Podman and Dockge
  ```
  apk add openssh
  
  export https_proxy="socks5://127.0.0.1:8089"; export http_proxy="socks5://127.0.0.1:8089" #proxy
  ```
  ### Podman
  ```bash
  # install Podman and Dockge
  # Testing repository is required for podman-compose.
  echo 'https://dl-cdn.alpinelinux.org/alpine/edge/testing' >> /etc/apk/repositories
  apk -U upgrade
  apk add fuse-overlayfs podman-docker podman-compose
  # Ensure Podman uses fuse-overlayfs.
  sed -i -e 's:.*mount_program *=.*:mount_program = "/usr/bin/fuse-overlayfs":' /etc/containers/storage.conf
  # Always start Podman on boot.
  rc-update add podman boot
  # We updated a lot. Get a fresh boot.
  reboot
  ```
  ### Dockge
  ```bash
  mkdir -p /opt/compose/dockge

  cat >/opt/compose/dockge/compose.yaml <<HERE
  x-podman:
    in_pod: false
  volumes:
    dockge_data:
    driver: local
    name: "dockge_data"
  services:
  dockge:
    image: louislam/dockge:1
    restart: always
    ports:
      # Host Port : Container Port
      - 5001:5001
    volumes:
      - /var/run/podman/podman.sock:/var/run/docker.sock
      - dockge_data:/app/data
      - /opt/compose:/opt/compose
    environment:
      - DOCKGE_STACKS_DIR=/opt/compose
  HERE

  # for some reason

  apk add openssh iptables

  pkill ssh ; ssh -CNf -D 8089 user@ssh_host
  export https_proxy="socks5://127.0.0.1:8089";export http_proxy="socks5://127.0.0.1:8089" #proxy


  cd /opt/compose/dockge
  podman-compose up -d

  ```
  
  
- Podman Socks5 [通过socks5本地代理下载docker镜像](https://blog.csdn.net/weixin_42603116/article/details/139870863)
- [-p](https://docs.podman.io/en/v5.0.2/markdown/podman-run.1.html#publish-p-ip-hostport-containerport-protocol)
  - ```--publish, -p=[[ip:][hostPort]:]containerPort[/protocol]```

# Tailscale
- [Using Tailscale with Docker](https://tailscale.com/kb/1282/docker)

# podman compose.yaml
- https://www.composerize.com/

# docker container X forwarding
- [Basic container for X11 forwarding goodness ](https://gist.github.com/udkyo/c20935c7577c71d634f0090ef6fa8393)
- [docker-wine-x11-novnc](https://github.com/sykuang/docker-wine-x11-novnc)
- 检查端口占用: 使用 netstat -tuln 或 lsof -i :8080 检查端口 8080 是否已被占用。 [Wine-X11-noVNC Docker 项目常见问题解决方案](https://blog.csdn.net/gitblog_00039/article/details/144503221) **Worked**
- ==> https://hub.docker.com/r/solarkennedy/wine-x11-novnc-docker **Worked**
  - ```docker run --rm -p 8080:8080 solarkennedy/wine-x11-novnc-docker```
  - ```docker run --rm -p 8080:8080 -v /media/data/containers/podman/volumes/_data/mt4:/root/prefix32/drive_c/users/root/Desktop/mt4 solarkennedy/wine-x11-novnc-docker```
- ==> https://github.com/solarkennedy/wine-x11-novnc-docker

# alpine-autossh
- [alpine-autossh](https://github.com/ctroncoso/alpine-autossh) alpine-autossh is a small lightweight (8.5MB) image that attempts to provide a secure way to establish an SSH Tunnel without including your keys in the image itself or linking to the host .
- ssh key rsa [Setup SSH Passwordless Login ](https://wiki.debian.org/Setup%20SSH%20Passwordless%20Login)
- ```chmod 600 ~/.ssh/id_rsa```

# [distrobox](https://distrobox.it/)
- Suggestion: make a copy of your void rootfs, & make it runnable under distrobox. You don't have to bootstrap a fresh distro rootfs from scratch:
- https://fedx.prose.sh/Adding_New_Distros_to_Distrobox
- Then use your void pkgs under kiss, and gradually replace them (if you want) "ship of Theseus" style.
- [Daily driving KISS ](https://www.reddit.com/r/kisslinux/comments/1llvuj7/daily_driving_kiss/)
- [Adding new Distros to Distrobox](https://fedx.prose.sh/Adding_New_Distros_to_Distrobox)
- [我全都要！Distrobox使用教學，透過容器安裝其他Linux發行版的套件](https://ivonblog.com/posts/distrobox-usage/)
- github ==> https://github.com/89luca89/distrobox
  
# mise-en-place
- [mise-en-place](https://mise.jdx.dev/)


# Proxmox
- [Exploring Proxmox as a Total Beginner: Seeking Guidance and Tips](https://www.reddit.com/r/Proxmox/comments/171g9l7/exploring_proxmox_as_a_total_beginner_seeking/)
- [Beginners guide for Proxmox based homelab setup on an old consumer hardware like desktop pc/laptop. ](https://www.reddit.com/r/Proxmox/comments/154k57h/beginners_guide_for_proxmox_based_homelab_setup/)
- [5 Proxmox Projects to Level Up Your Home Lab This Weekend ](https://www.virtualizationhowto.com/2025/07/5-proxmox-projects-to-level-up-your-home-lab-this-weekend/)
- [Install Proxmox VE on USB Stick](https://c-nergy.be/blog/?p=1159) vbox

- [Resolving Alpine Linux Wi-Fi Issues: Simple Guide](https://krython.com/post/resolving-alpine-linux-wi-fi-issues/)
- [How to Run GUI Apps inside LXC containers](https://paula-rusti.hashnode.dev/how-to-run-gui-apps-inside-lxc-containers)
- Mount directory to LXC container
- [Exposing a directory on the host machine to an LXC container](https://gist.github.com/julianlam/07abef272136ea14a627)
- [Proxmox Assign Bind Mount To Unprivileged Container](https://gist.github.com/ajmassi/e6862294d114467b46f9b7f073921352)
- [Resolving permissions issues with host bind mounts in LXC/LXD containers](https://www.reddit.com/r/homelab/comments/4h0erv/resolving_permissions_issues_with_host_bind/)
- [Unprivileged LXC containers](https://pve.proxmox.com/wiki/Unprivileged_LXC_containers)
- However you will soon realise that every file and directory will be mapped to "nobody" (uid 65534), which is fine as long as
- [Proxmox Unprivilaged LXC Container Bind Mount UID/GID Mapping](https://www.apalrd.net/posts/2023/tip_idmap/) [backup](https://github.com/gogonkt/notes/blob/main/ProxmoxBindMountUIDGID.md)
- After doing this, I did a recursive chown of the data directories to 1000:1000 on host and this also makes the guest’s user 1000 have access (since it’s idmapped).
- chown -R 1005:1005 /mnt/bindmounts/shared

- 

- [Bind Mount Points](https://pve.proxmox.com/pve-docs/pve-admin-guide.html#_bind_mount_points) **Worked** ==> ```# pct set 100 -mp0 /media/data,mp=/media/data ```
  - For example, to make the directory /mnt/bindmounts/shared accessible in the container with ID 100 under the path /shared, add a configuration line such as:
  - ``` mp0: /mnt/bindmounts/shared,mp=/shared ```
  - into ```/etc/pve/lxc/100.conf.```
  - Or alternatively use the pct tool:
  - ```pct set 100 -mp0 /mnt/bindmounts/shared,mp=/shared```
- [how to increase the size of proxmox LXC container???](https://forum.proxmox.com/threads/how-to-increase-the-size-of-proxmox-lxc-container.119453/)
  - ``` # pct resize 999 rootfs 200G ```

# kubernetes self hosted
- [QuickStart: Installing KubeVirt In Under 5 Minutes](https://dev.to/thenjdevopsguy/quickstart-installing-kubevirt-in-under-5-minutes-226h)

# Talos
- [How I Setup Talos Linux](https://medium.com/@pedrotychang/how-i-setup-talos-linux-bc2832ec87cc)

# GitOps-driven homelab
- [My take on a fully -driven homelab.](https://www.reddit.com/r/kubernetes/comments/1lcdefa/my_take_on_a_fully_gitopsdriven_homelab_looking/)
- ==> [Over-Engineered GitOps Homelab](https://github.com/theepicsaxguy/homelab)
- [Kubernetes As a Service (KAAS) in Proxmox](https://github.com/kubebn/talos-proxmox-kaas)
- [Proxmox-GitOps: Self-configuring and ‚Everything as Code‘ Container Management
](https://www.reddit.com/r/selfhosted/comments/1lxxxcs/proxmoxgitops_selfconfiguring_and_everything_as/)
- [Proxmox-GitOps: Self-configuring GitOps Environment for Container Automation in Proxmox VE. ](https://dev.to/stevius10/proxmox-gitops-self-configuring-gitops-environment-for-container-automation-in-proxmox-ve-2lke)
- [Infrastructure Automation: Provisioning VMs on Proxmox with Packer, OpenTOFU, GitLab, Vault, and Minio.](https://medium.com/@avishkumar27/infrastructure-automation-provisioning-vms-on-proxmox-with-packer-opentofu-gitlab-vault-and-27fda7d73771)
- [You do not need \[tool\] for simple gitops (most times)](https://eskerda.com/you-do-not-need-tool-for-simple-gitops-most-times/)
- [Minimal GitOps-like Deployment Tool](https://usher.dev/posts/2025-02-17-minimal-cluster-deployment-tool/)
- [GitOps in 2025: From Old-School Updates to the Modern Way ](https://www.cncf.io/blog/2025/06/09/gitops-in-2025-from-old-school-updates-to-the-modern-way/)
- [Implementing GitOps without Kubernetes](https://www.innoq.com/en/articles/2025/01/gitops-kubernetes/)

- [Building a LXC in Proxmox with Automation](https://noted.lol/building-a-lxc-in-proxmox-with-automation/)


# tproxy
1. [Proxmox VE 安装OpenWRT旁路由（三）ImmortalWrt&openclash](https://zhuanlan.zhihu.com/p/718052893) 无奈选着选着安装immortalWrt XD
2. [tproxy（透明代理）](https://www.zhaohuabing.com/learning-linux/docs/tproxy/)
3. [虚拟机安装ImmortalWrt，接近原版openwrt，更稳定好用](https://post.smzdm.com/p/arrq4q3g/)
4. download immortalWrt qcow2
5. ```gzip -d immortalwrt.qcow2.gz```
6. ```mkdir /var/lib/vz/template/qemu```
7. ```cp immortalwrt.qcow2 /var/lib/vz/template/qemu/```
8. [Add QCOW2 to proxmox](https://bobcares.com/blog/add-qcow2-to-proxmox/)
9. https://pve.proxmox.com/wiki/Migrate_to_Proxmox_VE  ```qm disk import```
10. https://developers.cloudflare.com/1.1.1.1/ip-addresses/
11. [OpenWRT can't resolved DNS](https://www.reddit.com/r/openwrt/comments/owp9u2/openwrt_cant_resolved_dns/)
12. /etc/init.d/dnsmasq So I edited the dnsmasq ```# DNS_SERVERS="$DNS_SERVERS 127.0.0.1" ==> DNS_SERVERS="$DNS_SERVERS 192.168.2.31"```Now, every time the OpenWRT, the /temp/resolv.conf has ```nameserver 192.168.2.31```
13. https://developers.cloudflare.com/1.1.1.1/ip-addresses/
14. [ImmortalWrt旁路由安装与配置](https://blog.eggtargaryen.com/posts/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4/20241227_1.html)
15. [OpenClash 保姆级设置方案](https://github.com/Aethersailor/Custom_OpenClash_Rules)
16. [OpenClash替换使用Mihomo内核](https://deeprouter.org/article/how-to-use-mihomo-on-openclash) file name ```clash_meta``` XD **Worked**
17. [OpenClash极简使用方案](https://www.iigeek.com/archives/370) [backup](https://github.com/gogonkt/notes/blob/main/openclashsetting.md) **Worked**
18. https://raw.githubusercontent.com/ssrsub/ssr/master/clash.yaml BaiPiao





# Chroot install Proxmox
- [Installing Debian (and Proxmox) by hand from a rescue environment](https://quantum5.ca/2024/08/12/installing-debian-proxmox-by-hand-from-rescue-environment/)
- [Moving Proxmox ZFS boot drive to a new disk](https://lucatnt.com/tag/proxmox/)

  
# Chromium
- [Launch Chromium in kiosk mode](https://sylvaindurand.org/launch-chromium-in-kiosk-mode/)
- 
# Ventoy
- [How to use Ventoy to boot Linux install?](https://www.ventoy.net/en/plugin_grubmenu.html)
- [輕鬆製作多重開機隨身碟：Ventoy v1.0.98 最新版使用指南](https://izaka.tw/ventoy-bootable-usb-solution-user-guide/)
- [SX_linux_PE安装器2025-02-04](https://www.cnblogs.com/liuzhaoyzz/p/18667751)
- [Ventoy引导启动PVE--教你如何封装自己的PVE虚拟机](https://yangwenqing.com/archives/2065/)

# Easy Way to Share a Folder Across Multiple LXC Containers in Proxmox
- [Easy Way to Share a Folder Across Multiple LXC Containers in Proxmox](https://medium.com/@PlanB./easy-way-to-share-a-folder-across-multiple-lxc-containers-in-proxmox-9220cc0d8934)

# Read SD card plugged into host from VM
- You have to pass it through as a USB device. Somewhat along those lines:
- https://pve.proxmox.com/wiki/USB_Devices_in_Virtual_Machines#Alternate_way:_pass_the_USB_port_to_the_guest
- https://forum.proxmox.com/threads/sd-card-not-showing-up.146180/
- In Datacenter / Storage, Add / Directory -- if you already have it mounted on the host

# tethering iPhone
- [How to get unlimited 5G tethering with an unjailbroken iPhone](https://dogparty.medium.com/how-to-get-unlimited-5g-tethering-with-an-unjailbroken-iphone-ceff3a1f3642)
- [Howto: Internet tethering with iPhone using usb cable](https://forum.tinycorelinux.net/index.php/topic,21713.0.html)
