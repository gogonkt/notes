z8350pve.md

# z8350pve raravm
- [How I Set Up Proxmox VE: A Comprehensive Guide to Open-Source Virtualization](https://hostbor.com/proxmox-ve-virtualization/)
- [Set Network to use DHCP](https://weblog.lkiesow.de/20220223-proxmox-test-machine-self-servic/proxmox-server-dhcp.html)
- 




- [工控機安裝Proxmox VE（PVE）](https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E5%B7%A5%E6%8E%A7%E6%A9%9F%E5%AE%89%E8%A3%9Dproxmox-ve-pve-94a09647d95f)
- ```
  } elsif ($dev =~ m|^/dev/mmcblk\d+$|) {
    return "${dev}p$partnum";
  ```
- [Install Proxmox VE on eMMC](https://ibug.io/blog/2022/03/install-proxmox-ve-emmc/)
- [Prolonging eMMC Life Span with Proxmox VE](https://ibug.io/blog/2023/07/prolonging-emmc-life-span-with-proxmox-ve/)
- echo deadline >  /sys/block/mmcblk0/queue/scheduler
- vi /etc/systemd/journald.conf
- vi /etc/default/rrdcached
- vi /etc/init.d/rrdcached
- systemctl restart rrdcached.service
- systemctl daemon-reload
- 

# kvm tun
- [Kvm nested in LXC, problem accessing /dev/kvm inside lxc - Debian11](https://discuss.linuxcontainers.org/t/kvm-nested-in-lxc-problem-accessing-dev-kvm-inside-lxc-debian11/13193)
- ```
  lxc.cgroup2.devices.allow: c 10:200 rwm
  lxc.mount.entry: /dev/net/tun dev/net/tun none bind,create=file
  lxc.cgroup2.devices.allow: c 10:232 rwm
  lxc.mount.entry: /dev/kvm dev/kvm none bind,create=file 0 0
  ```
  
# Update Templates list
- ```pveam update```

# zram
- [Zram as SWAP file in Proxmox VE](https://introserv.com/tutorials/zram-as-swap-file-in-proxmox-ve/)
- modprobe zram
- zramctl -s 24G -a zstd /dev/zram0
- mkswap /dev/zram0
- swapon /dev/zram0 -p 10
- 
- echo "zram" > /etc/modules-load.d/zram.conf
- #echo 'KERNEL=="zram0", ATTR { disksize } ="32G" RUN="/sbin/mkswap /dev/zram0", TAG+="systemd"' > /etc/udev/rules.d/99-zram.rules
- #ACTION=="add", KERNEL=="zram0", ATTR{initstate}=="0", ATTR{comp_algorithm}="zstd", ATTR{disksize}="4G", TAG+="systemd"
- echo 'ACTION=="add", KERNEL=="zram0", ATTR{initstate}=="0", ATTR{comp_algorithm}="zstd", ATTR{disksize}="24G", TAG+="systemd"' > /etc/udev/rules.d/99-zram.rules
- #echo "/dev/zram0 none swap defaults,pri=10 0 0" >> /etc/fstab
- echo "/dev/zram0 none swap defaults,discard,pri=100,x-systemd.makefs 0 0" >> /etc/fstab
- 

- [Is it okay to allocate 100% RAM to zRAM?](https://www.reddit.com/r/linuxquestions/comments/1cgh4wy/is_it_okay_to_allocate_100_ram_to_zram/)
- https://pve.proxmox.com/wiki/Zram
- [Running Out of RAM on Linux? Add Zram Before Upgrading!](https://linuxblog.io/running-out-of-ram-linux-add-zram/)
- [zram-config.](https://bbs.archlinux.org/viewtopic.php?id=261842) aaa
- ==> https://github.com/ecdye/zram-config
- 

# tmux
- [A Quick and Easy Guide to tmux](https://hamvocke.com/blog/a-quick-and-easy-guide-to-tmux/)
- ap update && apt install tmux

# ProxMenux
- https://macrimi.github.io/ProxMenux/docs/introduction

# tailscale
- [Proxmox: Running Tailscale](https://medium.com/@rar1871/proxmox-running-tailscale-7929b3eaa31f)
- ```
  Proxmox host open /etc/pve/lxc/xxx.conf

  Add the following lines:

  lxc.cgroup2.devices.allow: c 10:200 rwm
  lxc.mount.entry: /dev/net dev/net none bind,create=dir
  
  Save the file and reboot the container in question. There is no need to reboot the Proxmox host.

  Now install and activate Tailscale, just like on a VM:

  apk update && apk add curl
  curl -fsSL https://tailscale.com/install.sh | sh

  tailscale up
  ```
- Connect to Tailscale as a subnet router
- ```
  echo 'net.ipv4.ip_forward = 1' | tee -a /etc/sysctl.d/99-tailscale.conf
  echo 'net.ipv6.conf.all.forwarding = 1' | tee -a /etc/sysctl.d/99-tailscale.conf
  sysctl -p /etc/sysctl.d/99-tailscale.conf

  tailscale up --advertise-exit-node --advertise-routes=192.168.128.0/24 --accept-routes
  rc-service tailscale restart
  ```
- ```
  tailscale set --advertise-routes=192.0.2.0/24,198.51.100.0/24
  ```
- Advertise a device as an exit node
- ```
  tailscale set --advertise-exit-node
  tailscale up
  ```
- Alternatively, set --exit-node-allow-lan-access to true to allow direct access to your local network when routing traffic through an exit node.
- ```
  tailscale set --exit-node=<exit-node-ip> --exit-node-allow-lan-access=true
  ```

- [Tailscale in LXC containers](https://tailscale.com/kb/1130/lxc-unprivileged)
- [Tailscale in Alpine Linux](https://lonelyidea.com/posts/tailscale-in-alpine/)

# 
- [Proxmox: How to use a USB drive as storage for your containers](https://dev.to/onticdani/proxmox-how-to-mount-a-usb-drive-n36)

# 7zip
- https://operavps.com/docs/install-7zip-in-linux/
- 7z a compressed_file.7z file_to_compress
- 7z a home.7z home/
- 7z a compressed_files.7z file1.txt file2.txt directory1/ directory2/
- 7z x compressed_file.7z
- 7z x compressed_file.7z -o /media/
- Extract Archive in the Currently Active Working Directory
- 7z e example.7z
- 7z l example.7z

# Dockge
- https://community-scripts.github.io/ProxmoxVE/scripts?id=dockge
- [==>](https://github.com/gogonkt/notes/blob/main/MobileProxmoxWorkstation.md#docker-container-x-forwarding)
- docker run --rm -p 8080:8080 -v /share/mt3bar:/mt3bar solarkennedy/wine-x11-novnc-docker
- [Docker + Dockge on a Alpine VM](https://homelab.casaursus.net/docker-dockge-on-a-alpine-vm/)
- 

# Docker X forwarding SSH
- [Docker X11 Client Via SSH](https://alanhohn.com/posts/2015/docker-x11-ssh/)
- ```docker run --net=host --env="DISPLAY" --volume="$HOME/.Xauthority:/root/.Xauthority:rw" xeyes ```
- [Running GUI Applications in a Linux Docker Container](https://www.baeldung.com/linux/docker-container-gui-applications)

# Alpine docker LXC
- [Alpine Linux-based LXC with Docker support on a PVE host](https://kingtam.win/archives/alpine-docker.html)
- [How to setup VA-API within Proxmox LXC Unprivileged container](https://gist.github.com/aleksasiriski/820f22fadba72815f3eaf290465611a5)
- [Alpine Linux LXC with Browser and RDP on Proxmox](https://www.filipnet.de/proxmox-lxc-alpine-browser/#)
- [How to Set Up a Alpine Linux VM Hosting XRDP and XFCE for Secure Remote Desktop Access](https://it-notes.dragas.net/2024/05/14/How-to-Set-Up-an-Alpine-Linux-VM-Hosting-XRDP-and-XFCE-for-Secure-Remote-Desktop-Access/)

- [Why I Use Proxmox on My Desktop Workstation](https://jaredweisinger.medium.com/why-i-use-proxmox-on-my-desktop-workstation-3e6a20708447)
- [Running Docker in a Proxmox Container](https://blog.gurucomputing.com.au/Running%20Docker%20in%20a%20Proxmox%20Container/)
- [Convert Alpine Linux containers to VMs](https://valinet.ro/2024/06/01/Convert-Alpine-Linux-container-to-VM.html)
- 

# CWM
- setup:
- ```
   setup-user 
   setup-xorg-base cwm xfce4-terminal xrdp xorgxrdp
   rc-update add xrdp
   rc-update add xrdp-sesman
   reboot
  ```
- .cwmrc
-
```
#bind-key CM-Return  "xfce4-terminal"
# Override terminal default
command term "xfce4-terminal"

# Set default font for menus
fontname "sans-serif:pixelsize=14:bold"

# Inherit current selected group
sticky yes

# Color things up
borderwidth 2
color activeborder   "#444444"
color inactiveborder "#111111"

# Application menu
command chrome      google-chrome
command xterm       xfce4-terminal

# Groupings
autogroup 1     "Terminal,terminal"
autogroup 2     "Google Chrome"

# Unbind some keys that are used in bash and tmux
unbind-key M-period
unbind-key M-Left
unbind-key M-Right
unbind-key M-Up
unbind-key M-Down
                                                 
# Use Alt + num to focus on only specific group  
bind-key M-1 group-only-1                        
bind-key M-2 group-only-2                        
bind-key M-3 group-only-3                        
                                               
# Add window to group                          
bind-key CMS-1 window-movetogroup-1            
bind-key CMS-2 window-movetogroup-2            
bind-key CMS-3 window-movetogroup-3            
bind-key M-m menu-cmd         
```

- [Michael's cwm desktop (minimal)](https://wiki.alpinelinux.org/wiki/Michael%27s_cwm_desktop_(minimal))
- apk add cwm
- echo "exec cwm" >> ~/.xinitrc
- ==> [Configuration of the Calm Window Manager (CWM)](https://github.com/pguerin3/cwmrc)
- [Configuring Calm Window Manager](https://findelabs.com/post/cwm-config/)
- [CWM  Alpine hacking/RE workstation](https://www.reddit.com/r/UsabilityPorn/comments/1hjfgjp/cwm_alpine_hackingre_workstation/)
- https://man.openbsd.org/cwmrc.5
- [Daily driving Ubuntu with OpenBSD's Calm Window Manager](https://www.reddit.com/r/Ubuntu/comments/128klmt/daily_driving_ubuntu_with_openbsds_calm_window/)
-
```
Here's some tips for getting started, with an aim to reduce that initial pain:

Ctrl-Alt-Enter to open a terminal

Alt-Shift-/ and start typing first letters of program you want to launch

Alt-/ and start typing any letters to switch to an open window containing the text

Alt-Shift-m to toggle Maximised view for active window

Alt-Shift-f to toggle Fullscreen view for active window

moving your mouse over a window makes that window active (ie, you may accidentially send keystrokes to the wrong window in the beginning, then grow to appreciate the saved clicks!)

Alt-hold primary mouse button to drag a window around

Alt-tab as usual to switch between windows

Ctrl-Shift-Alt along with h, j, k or l to quick resize a window left, down, up or right (I use this less now than just the Maximise or Fullscreen toggles, but can help if a window gets stuck somewhere you dont like)

As you won't have a menu bar, dock or any clutter on your screen anymore, if you want to launch say Ubuntu's settings, you could from terminal or the Alt-Shift-/ menu, type gnome-control-center

That's the majority if what I'm doing with cwm(1) these days. You can be a lot more of a power user by using window groups and other features from the docs.

The official docs are worth reading and the Wikipedia entry for more info.
  ```
- [Opening programs in cwm... am I missing something?](https://www.reddit.com/r/openbsd/comments/d3elv6/opening_programs_in_cwm_am_i_missing_something/)
- This may sound dumb, but are you pressing M-? (i.e., M-Shift-/), or M-/ (no Shift)?
- 
- 

# cwm vm alpine
```
# alpine-virt.iso
export BOOT_SIZE=100
export SWAP_SIZE=0
setup-alpine
# enable community repositories
# add user
# sys
# ...
# remove iso and reboot
reboot
```
```
apk -U upgrade
setup-xorg-base cwm xfce4-terminal feh
```
```
su -l <user>
echo "startx" > ~/.profile


mkdir ~/.config/wallpapers
cd ~/.config/wallpapers/
wget https://raw.githubusercontent.com/whoisYoges/lwalpapers/PicturesOnly/wallpapers/b-114.jpg
echo "feh --bg-fill /home/mvll/.config/wallpapers/b-114.jpg" >> ~/.xinitrc
echo "exec cwm" >> ~/.xinitrc
```



# WINE
- [Ultimate Guide to Running Windows Apps on Proxmox Debian 12 LXC: Wine, Lutris & Bottles!](https://blog.jackofallgates.com/ultimate-guide-to-running-windows-apps-on-proxmox-debian-12-lxc-wine-lutris-and)

# VMs
- [Install an Alpine Desktop VM](https://homelab.casaursus.net/install-a-alpine-desktop-vm/)
- [I have 1GB disk space, I want swap and boot partition smaller, how do I do it?](https://www.reddit.com/r/AlpineLinux/comments/181myyx/i_have_1gb_disk_space_i_want_swap_and_boot/)
- export BOOT_SIZE=100
- export SWAP_SIZE=0

# NFS
- [Launch a NFS server on Proxmox](https://gist.github.com/soulmachine/6310916333df55d91d59ddaec1e90c4f)

# OpenMediaVault
- [OpenMediaVault LXC](https://community-scripts.github.io/ProxmoxVE/scripts?id=omv)
- 

- [Install Proxmox remote without KVM](https://openthreat.ro/install-proxmox-remote-without-kvm/)

# Incus
- [What is Incus?](https://linuxcontainers.org/incus/)
- [Alpine for a remote KVM host running multiple VMs](https://www.reddit.com/r/AlpineLinux/comments/1kc2n73/alpine_for_a_remote_kvm_host_running_multiple_vms/)
- [Rapid DevOps Testing with Incus: Spin Up Linux VMs and Containers in Seconds](https://medium.com/@joss-dev/rapid-devops-testing-with-incus-spin-up-linux-vms-and-containers-in-seconds-c87519902730)
- [Moving my personal infrastructure to Kubernetes (single-node k3s)](https://stanislas.blog/2025/04/moving-to-k8s/)
- 

# etc.
- https://freeshell.de/
- [noVNCCopyPasteProxmox.user.js](https://gist.github.com/amunchet/4cfaf0274f3d238946f9f8f94fa9ee02)
- [CWM Feeling at $HOME anywhere](https://www.reddit.com/r/unixporn/comments/9lr4p0/cwm_feeling_at_home_anywhere/)
- ==> pm [Simple (borderline stupid) pack manager.](https://z3bra.org/pm/)
- so I used my own pack manager: pm. I use it to install software in $HOME/.local and keep track of the installed files. I have a small script called pack to compile/package software so my little pm(1) can install them. The packaging format is pretty simple so it's easier to package software like this rather than using the distro's specific format.
- ==> [PACK(5)](https://z3bra.org/man/pack.5.html)
- 
